{%- liquid
  assign overlay_opacity = section.settings.overlay_opacity | divided_by: 100.0
  assign min_height = section.settings.min_height
  assign min_height_mobile = section.settings.min_height_mobile
  assign image_sizes = '(min-width: 1400px) 1400px, calc(100vw - calc(2 * 3.3vw))'
  if section.settings.full_width
    assign image_sizes = '100vw'
  endif
-%}
<div
  class="
    countdown-banner
    countdown-banner--bar
    {% if section.settings.image != blank or section.settings.mobile_image != blank %}countdown-banner--has-image{% endif %}
    section
    {% if section.settings.full_width %}section--full-width{% endif %}
    {{ section.settings.section_padding }}
    {% if settings.enable_section_animations and section.settings.enable_animation %}
      animation
      animation--countdown-bar
    {% endif %}
  "
  style="
    --color-background: {{ section.settings.background_color }};
    --color-text: {{ section.settings.text_color }};
    --color-text-link: {{ section.settings.text_color }};
    --color-text-meta: {{ section.settings.text_color | color_modify: 'alpha', 0.6 }};
    --overlay-background: {{ section.settings.color_overlay }};
    {% if section.settings.color_overlay_gradient != blank %}
      --overlay-background-gradient: {{ section.settings.color_overlay_gradient }};
    {% endif %}
    --overlay-opacity: {{ overlay_opacity }};
    --min-height: {{ min_height }}px;
    --min-height-mobile: {{ min_height_mobile }}px;
    {% render 'overlay-button-vars' with color_button_text: section.settings.button_text_color, color_button_background: section.settings.button_background_color %}
  "
  data-section-id="{{ section.id }}"
  data-section-type="countdown-bar"
>
  <div class="countdown-banner__inner">
    {%- if section.settings.mobile_image != blank -%}
      {%-
        render 'image' with
        wrapper_class: "countdown-banner__image countdown-banner__image--mobile",
        image: section.settings.mobile_image,
        focal_point: section.settings.mobile_focal_point,
        sizes: image_sizes
      -%}
    {%- endif -%}

    {%- if section.settings.image != blank -%}
      {%-
        render 'image' with
        wrapper_class: "countdown-banner__image",
        image: section.settings.image,
        focal_point: section.settings.focal_point,
        sizes: image_sizes
      -%}
    {%- endif -%}
    <div class="countdown-banner__overlay"></div>

    <div class="countdown-banner__content">
      <div class="countdown-banner__bar">
        {%- if section.settings.heading != blank -%}
          <div class="countdown-banner__bar-item countdown-banner__bar-item--heading">
            <{{ section.settings.heading_tag }} class="ff-heading fs-heading-4-base">
              {{- section.settings.heading -}}
            </{{ section.settings.heading_tag }}>
          </div>
        {%- endif -%}

        <div class="countdown-banner__bar-item countdown-banner__bar-item--timer">
          {%-
            render 'countdown-timer' with
            year: section.settings.year,
            month: section.settings.month,
            day: section.settings.day,
            hour: section.settings.hour,
            minute: section.settings.minute,
            size: 'small',
            time_zone_selection: section.settings.time_zone_selection,
            hide_timer_on_complete: section.settings.hide_timer_on_complete,
            timer_complete_message: section.settings.timer_complete_message
          -%}
        </div>

        {%- if section.settings.text != blank
          or section.settings.link_text != blank
          and section.settings.link != blank
        -%}
          <div class="countdown-banner__bar-item countdown-banner__bar-item--text">
            {%- if section.settings.text != blank -%}
              <div class="countdown-banner__bar-text rte">
                {{ section.settings.text }}
              </div>
            {%- endif -%}

            {%- if section.settings.link_text -%}
              {%-
                render 'button-block' with
                wrapper_class: "countdown-banner__button",
                link: section.settings.link,
                label: section.settings.link_text,
                is_overlay: true,
                buttons_can_inline: true,
                is_small: true,
                button_style: section.settings.button_style
              -%}
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.countdown_bar.name",
  "tag": "section",
  "class": "shopify-section--full-width",
  "disabled_on": {
    "groups": [
      "header",
      "custom.overlay"
    ]
  },
  "settings": [
    {
      "type": "range",
      "id": "min_height",
      "min": 60,
      "max": 300,
      "step": 5,
      "unit": "px",
      "label": "t:sections.shared.countdown.settings.height.min_height.label",
      "default": 60
    },
    {
      "type": "range",
      "id": "min_height_mobile",
      "min": 60,
      "max": 300,
      "step": 5,
      "unit": "px",
      "label": "t:sections.shared.countdown.settings.height.mobile_min_height.label",
      "default": 60
    },
    {
      "type": "header",
      "content": "t:sections.shared.countdown.settings.timer.header.content"
    },
    {
      "type": "number",
      "id": "year",
      "label": "t:sections.shared.countdown.settings.timer.year.label",
      "default": 2025
    },
    {
      "type": "select",
      "id": "month",
      "label": "t:sections.shared.countdown.settings.timer.month.label",
      "options": [
        {
          "value": "january",
          "label": "t:shared.options.months.january"
        },
        {
          "value": "february",
          "label": "t:shared.options.months.february"
        },
        {
          "value": "march",
          "label": "t:shared.options.months.march"
        },
        {
          "value": "april",
          "label": "t:shared.options.months.april"
        },
        {
          "value": "may",
          "label": "t:shared.options.months.may"
        },
        {
          "value": "june",
          "label": "t:shared.options.months.june"
        },
        {
          "value": "july",
          "label": "t:shared.options.months.july"
        },
        {
          "value": "august",
          "label": "t:shared.options.months.august"
        },
        {
          "value": "september",
          "label": "t:shared.options.months.september"
        },
        {
          "value": "october",
          "label": "t:shared.options.months.october"
        },
        {
          "value": "november",
          "label": "t:shared.options.months.november"
        },
        {
          "value": "december",
          "label": "t:shared.options.months.december"
        }
      ],
      "default": "january"
    },
    {
      "type": "select",
      "id": "day",
      "label": "t:sections.shared.countdown.settings.timer.day.label",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        },
        {
          "value": "4",
          "label": "4"
        },
        {
          "value": "5",
          "label": "5"
        },
        {
          "value": "6",
          "label": "6"
        },
        {
          "value": "7",
          "label": "7"
        },
        {
          "value": "8",
          "label": "8"
        },
        {
          "value": "9",
          "label": "9"
        },
        {
          "value": "10",
          "label": "10"
        },
        {
          "value": "11",
          "label": "11"
        },
        {
          "value": "12",
          "label": "12"
        },
        {
          "value": "13",
          "label": "13"
        },
        {
          "value": "14",
          "label": "14"
        },
        {
          "value": "15",
          "label": "15"
        },
        {
          "value": "16",
          "label": "16"
        },
        {
          "value": "17",
          "label": "17"
        },
        {
          "value": "18",
          "label": "18"
        },
        {
          "value": "19",
          "label": "19"
        },
        {
          "value": "20",
          "label": "20"
        },
        {
          "value": "21",
          "label": "21"
        },
        {
          "value": "22",
          "label": "22"
        },
        {
          "value": "23",
          "label": "23"
        },
        {
          "value": "24",
          "label": "24"
        },
        {
          "value": "25",
          "label": "25"
        },
        {
          "value": "26",
          "label": "26"
        },
        {
          "value": "27",
          "label": "27"
        },
        {
          "value": "28",
          "label": "28"
        },
        {
          "value": "29",
          "label": "29"
        },
        {
          "value": "30",
          "label": "30"
        },
        {
          "value": "31",
          "label": "31"
        }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "hour",
      "label": "t:sections.shared.countdown.settings.timer.hour.label",
      "options": [
        {
          "value": "0",
          "label": "t:shared.options.hours.hour_0"
        },
        {
          "value": "1",
          "label": "t:shared.options.hours.hour_1"
        },
        {
          "value": "2",
          "label": "t:shared.options.hours.hour_2"
        },
        {
          "value": "3",
          "label": "t:shared.options.hours.hour_3"
        },
        {
          "value": "4",
          "label": "t:shared.options.hours.hour_4"
        },
        {
          "value": "5",
          "label": "t:shared.options.hours.hour_5"
        },
        {
          "value": "6",
          "label": "t:shared.options.hours.hour_6"
        },
        {
          "value": "7",
          "label": "t:shared.options.hours.hour_7"
        },
        {
          "value": "8",
          "label": "t:shared.options.hours.hour_8"
        },
        {
          "value": "9",
          "label": "t:shared.options.hours.hour_9"
        },
        {
          "value": "10",
          "label": "t:shared.options.hours.hour_10"
        },
        {
          "value": "11",
          "label": "t:shared.options.hours.hour_11"
        },
        {
          "value": "12",
          "label": "t:shared.options.hours.hour_12"
        },
        {
          "value": "13",
          "label": "t:shared.options.hours.hour_13"
        },
        {
          "value": "14",
          "label": "t:shared.options.hours.hour_14"
        },
        {
          "value": "15",
          "label": "t:shared.options.hours.hour_15"
        },
        {
          "value": "16",
          "label": "t:shared.options.hours.hour_16"
        },
        {
          "value": "17",
          "label": "t:shared.options.hours.hour_17"
        },
        {
          "value": "18",
          "label": "t:shared.options.hours.hour_18"
        },
        {
          "value": "19",
          "label": "t:shared.options.hours.hour_19"
        },
        {
          "value": "20",
          "label": "t:shared.options.hours.hour_20"
        },
        {
          "value": "21",
          "label": "t:shared.options.hours.hour_21"
        },
        {
          "value": "22",
          "label": "t:shared.options.hours.hour_22"
        },
        {
          "value": "23",
          "label": "t:shared.options.hours.hour_23"
        }
      ],
      "default": "0"
    },
    {
      "type": "select",
      "id": "minute",
      "label": "t:sections.shared.countdown.settings.timer.minute.label",
      "options": [
        {
          "value": "0",
          "label": "00"
        },
        {
          "value": "1",
          "label": "01"
        },
        {
          "value": "2",
          "label": "02"
        },
        {
          "value": "3",
          "label": "03"
        },
        {
          "value": "4",
          "label": "04"
        },
        {
          "value": "5",
          "label": "05"
        },
        {
          "value": "6",
          "label": "06"
        },
        {
          "value": "7",
          "label": "07"
        },
        {
          "value": "8",
          "label": "08"
        },
        {
          "value": "9",
          "label": "09"
        },
        {
          "value": "10",
          "label": "10"
        },
        {
          "value": "11",
          "label": "11"
        },
        {
          "value": "12",
          "label": "12"
        },
        {
          "value": "13",
          "label": "13"
        },
        {
          "value": "14",
          "label": "14"
        },
        {
          "value": "15",
          "label": "15"
        },
        {
          "value": "16",
          "label": "16"
        },
        {
          "value": "17",
          "label": "17"
        },
        {
          "value": "18",
          "label": "18"
        },
        {
          "value": "19",
          "label": "19"
        },
        {
          "value": "20",
          "label": "20"
        },
        {
          "value": "21",
          "label": "21"
        },
        {
          "value": "22",
          "label": "22"
        },
        {
          "value": "23",
          "label": "23"
        },
        {
          "value": "24",
          "label": "24"
        },
        {
          "value": "25",
          "label": "25"
        },
        {
          "value": "26",
          "label": "26"
        },
        {
          "value": "27",
          "label": "27"
        },
        {
          "value": "28",
          "label": "28"
        },
        {
          "value": "29",
          "label": "29"
        },
        {
          "value": "30",
          "label": "30"
        },
        {
          "value": "31",
          "label": "31"
        },
        {
          "value": "32",
          "label": "32"
        },
        {
          "value": "33",
          "label": "33"
        },
        {
          "value": "34",
          "label": "34"
        },
        {
          "value": "35",
          "label": "35"
        },
        {
          "value": "36",
          "label": "36"
        },
        {
          "value": "37",
          "label": "37"
        },
        {
          "value": "38",
          "label": "38"
        },
        {
          "value": "39",
          "label": "39"
        },
        {
          "value": "40",
          "label": "40"
        },
        {
          "value": "41",
          "label": "41"
        },
        {
          "value": "42",
          "label": "42"
        },
        {
          "value": "43",
          "label": "43"
        },
        {
          "value": "44",
          "label": "44"
        },
        {
          "value": "45",
          "label": "45"
        },
        {
          "value": "46",
          "label": "46"
        },
        {
          "value": "47",
          "label": "47"
        },
        {
          "value": "48",
          "label": "48"
        },
        {
          "value": "49",
          "label": "49"
        },
        {
          "value": "50",
          "label": "50"
        },
        {
          "value": "51",
          "label": "51"
        },
        {
          "value": "52",
          "label": "52"
        },
        {
          "value": "53",
          "label": "53"
        },
        {
          "value": "54",
          "label": "54"
        },
        {
          "value": "55",
          "label": "55"
        },
        {
          "value": "56",
          "label": "56"
        },
        {
          "value": "57",
          "label": "57"
        },
        {
          "value": "58",
          "label": "58"
        },
        {
          "value": "59",
          "label": "59"
        }
      ],
      "default": "0"
    },
    {
      "type": "select",
      "id": "time_zone_selection",
      "label": "t:sections.shared.countdown.settings.timer.time_zone_selection.label",
      "options": [
        {
          "value": "shop",
          "label": "t:sections.shared.countdown.settings.timer.time_zone_selection.options.shop"
        },
        {
          "value": "user",
          "label": "t:sections.shared.countdown.settings.timer.time_zone_selection.options.user"
        }
      ],
      "default": "shop",
      "info": "t:sections.shared.countdown.settings.timer.time_zone_selection.info"
    },
    {
      "type": "checkbox",
      "id": "hide_timer_on_complete",
      "label": "t:sections.shared.countdown.settings.timer.hide_timer_on_complete.label"
    },
    {
      "type": "richtext",
      "id": "timer_complete_message",
      "label": "t:sections.shared.countdown.settings.timer.timer_complete_message.label"
    },
    {
      "type": "header",
      "content": "t:sections.shared.countdown.settings.content.header.content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.shared.countdown.settings.content.heading.label",
      "default": "t:sections.shared.countdown.settings.content.heading.bar_default"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "t:shared.settings.heading_tag.heading.label",
      "options": [
        {
          "value": "h2",
          "label": "t:shared.settings.heading_tag.options.h2"
        },
        {
          "value": "h3",
          "label": "t:shared.settings.heading_tag.options.h3"
        },
        {
          "value": "h4",
          "label": "t:shared.settings.heading_tag.options.h4"
        },
        {
          "value": "h5",
          "label": "t:shared.settings.heading_tag.options.h5"
        },
        {
          "value": "h6",
          "label": "t:shared.settings.heading_tag.options.h6"
        }
      ],
      "default": "h4"
    },
    {
      "type": "paragraph",
      "content": "t:shared.settings.heading_tag.heading.info"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "t:sections.shared.countdown.settings.content.text.label",
      "default": "t:sections.countdown_bar.settings.text.default"
    },
    {
      "type": "url",
      "id": "link",
      "label": "t:shared.settings.button_link.label",
      "default": "/collections"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "t:shared.settings.button_link_text.label",
      "default": "t:sections.countdown_bar.settings.button_link_text.default"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "t:shared.settings.button_style.label",
      "options": [
        {
          "value": "btn--primary",
          "label": "t:shared.settings.button_style.options.solid"
        },
        {
          "value": "btn--secondary",
          "label": "t:shared.settings.button_style.options.outline"
        },
        {
          "value": "btn--callout",
          "label": "t:shared.settings.button_style.options.text"
        }
      ],
      "default": "btn--secondary"
    },
    {
      "type": "header",
      "content": "t:sections.shared.countdown.settings.background_image.header.content"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:shared.settings.image.default.label"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "t:shared.settings.image.mobile.label"
    },
    {
      "type": "select",
      "id": "focal_point",
      "label": "t:shared.settings.focal_point.image.default.label",
      "options": [
        {
          "value": "image_presentation",
          "label": "t:shared.options.focal_point.image_presentation"
        },
        {
          "value": "center",
          "label": "t:shared.options.focal_point.center"
        },
        {
          "value": "top",
          "label": "t:shared.options.focal_point.top"
        },
        {
          "value": "bottom",
          "label": "t:shared.options.focal_point.bottom"
        },
        {
          "value": "left",
          "label": "t:shared.options.focal_point.left"
        },
        {
          "value": "right",
          "label": "t:shared.options.focal_point.right"
        }
      ],
      "default": "image_presentation"
    },
    {
      "type": "select",
      "id": "mobile_focal_point",
      "label": "t:shared.settings.focal_point.image.mobile.label",
      "options": [
        {
          "value": "image_presentation",
          "label": "t:shared.options.focal_point.image_presentation"
        },
        {
          "value": "center",
          "label": "t:shared.options.focal_point.center"
        },
        {
          "value": "top",
          "label": "t:shared.options.focal_point.top"
        },
        {
          "value": "bottom",
          "label": "t:shared.options.focal_point.bottom"
        },
        {
          "value": "left",
          "label": "t:shared.options.focal_point.left"
        },
        {
          "value": "right",
          "label": "t:shared.options.focal_point.right"
        }
      ],
      "default": "image_presentation"
    },
    {
      "type": "header",
      "content": "t:shared.settings.color.header.content"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "t:shared.settings.color.general.background.label",
      "default": "#C51C26",
      "info": "t:sections.shared.countdown.settings.background_color.info"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "t:shared.settings.color.general.text.label",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "t:shared.settings.color.button.background.label",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "t:shared.settings.color.button.text.label",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "color_overlay",
      "label": "t:shared.settings.overlay.overlay.label",
      "default": "#000000"
    },
    {
      "type": "color_background",
      "id": "color_overlay_gradient",
      "label": "t:shared.settings.overlay.overlay_gradient.label"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "t:shared.settings.overlay.overlay_opacity.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 0
    },
    {
      "type": "header",
      "content": "t:shared.settings.section_style.header.content"
    },
    {
      "type": "checkbox",
      "id": "enable_animation",
      "label": "t:shared.settings.section_style.enable_animation.label",
      "default": true,
      "info": "t:shared.settings.section_style.enable_animation.info"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "t:shared.settings.section_style.full_width.label"
    },
    {
      "type": "select",
      "id": "section_padding",
      "label": "t:shared.settings.section_style.section_padding.label",
      "options": [
        {
          "value": "section--vertical-padding-none",
          "label": "t:shared.settings.section_style.section_padding.options.none"
        },
        {
          "value": "section--vertical-padding-top-bottom",
          "label": "t:shared.settings.section_style.section_padding.options.both"
        },
        {
          "value": "section--vertical-padding-top-only",
          "label": "t:shared.settings.section_style.section_padding.options.top"
        },
        {
          "value": "section--vertical-padding-bottom-only",
          "label": "t:shared.settings.section_style.section_padding.options.bottom"
        }
      ],
      "default": "section--vertical-padding-top-bottom"
    }
  ],
  "presets": [
    {
      "name": "t:sections.countdown_bar.presets.name"
    }
  ]
}
{% endschema %}
