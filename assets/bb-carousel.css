/* base */
.bb-sec { --gap: 20px; --radius:16px; --btn:44px; }
.bb-wrap { width: 100%; }
.bb-head { margin-bottom: 18px; }
.bb-head.is-center { text-align: center; }
.bb-title { margin: 0 0 8px; }

/* track */
.bb-track{
  display: grid;
  grid-auto-flow: column;
  gap: var(--gap);
  overflow-x: auto;
  overflow-y: visible;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  padding: 4px;
}
.bb-track::-webkit-scrollbar{ display:none; }
.bb-card{
  width: clamp(260px, 28vw, 420px);
  scroll-snap-align: center;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* show 3 on desktop by sizing container */
@media (min-width: 1024px){
  .bb-track{
    grid-auto-columns: minmax(0, 1fr);
  }
  .bb-card{
    width: min(32vw, 420px);
  }
}

/* media */
.bb-media{
  position: relative;
  aspect-ratio: 3/4;
  background:#efeff2;
  border-radius: var(--radius);
  overflow: hidden;
}
.bb-video{ width:100%; height:100%; object-fit:cover; display:block; }

/* overlay buttons */
.bb-btn{
  position:absolute; bottom:14px; right:14px;
  width:var(--btn); height:var(--btn);
  display:flex; align-items:center; justify-content:center;
  border:none; border-radius:999px;
  background:rgba(0,0,0,.55); color:#fff; cursor:pointer;
  box-shadow:0 2px 10px rgba(0,0,0,.18);
  transition:background .2s, transform .1s;
}
.bb-btn:hover{ background:rgba(0,0,0,.7); transform:translateY(-1px); }
.bb-btn .ic{ width:20px; height:20px; display:none; }
.bb-btn--mute{ right: calc(14px + var(--btn) + 8px); }
.bb-btn--mute[aria-pressed="true"] .ic--muted{ display:block; }   /* muted */
.bb-btn--mute[aria-pressed="false"] .ic--unmuted{ display:block; } /* unmuted */
.bb-btn--play[aria-pressed="true"] .ic--pause{ display:block; }    /* playing */
.bb-btn--play[aria-pressed="false"] .ic--play{ display:block; }    /* paused */

/* meta (small product row) */
.bb-meta{
  display:flex; align-items:center; gap:12px;
  padding:12px 14px; background:#fff;
  border:1px solid rgba(0,0,0,.08);
  border-radius:12px; text-decoration:none; color:inherit;
  transition:box-shadow .2s, border-color .2s, transform .2s;
}
.bb-meta:hover{ border-color:rgba(0,0,0,.18); transform:translateY(-2px); }
.bb-thumb{ width:42px; height:42px; object-fit:contain; }
.bb-meta__title{ font-weight:600; font-size:14px; line-height:1.35; }

/* mobile – full width card */
@media (max-width: 640px){
  .bb-card{ width: 100%; }
  .bb-track{ padding-inline: 16px; }
  .bb-media{ border-radius: var(--radius); }
}/* ==== 3 כרטיסיות בדסקטופ בדיוק ==== */
@media (min-width: 1024px){
  /* כל כרטיס תופס שליש מהרוחב פחות הריווחים */
  .bb-track{
    grid-auto-columns: calc((100% - 2 * var(--gap)) / 3);
  }
  .bb-card{
    width: auto; /* שלא יגביל ל-32vw */
  }
}

/* ==== כרטיסיות מעוגלות (המדיה יורשת את הרדיוס) ==== */
.bb-card{
  border-radius: 20px;
}
.bb-media{
  border-radius: inherit;
  overflow: hidden;
  box-shadow: 0 6px 24px rgba(0,0,0,.10);
}

/* גם השורה התחתונה (ה-meta) מעוגלת */
.bb-meta{
  border-radius: 16px;
}

/* ==== כפתורי Play / Sound – הצגה לפי aria-pressed ==== */
.bb-btn .ic{ display:none; width:20px; height:20px; }
.bb-btn--play[aria-pressed="true"]  .ic--pause   { display:block; }
.bb-btn--play[aria-pressed="false"] .ic--play    { display:block; }
.bb-btn--mute[aria-pressed="true"]  .ic--muted   { display:block; }
.bb-btn--mute[aria-pressed="false"] .ic--unmuted { display:block; }

/* מיקרו-נגישות ו-hover נחמדים */
.bb-btn:focus-visible{
  outline: 2px solid #fff;
  outline-offset: 2px;
}
.bb-btn:hover{ transform: translateY(-1px); }
/* ==== Mobile (<=640px): כרטיסיה אחת, מסך-מלא ==== */
@media (max-width: 640px){
  .bb-track{
    /* כרטיס אחד בכל “עמוד” */
    grid-auto-columns: 100%;
    gap: 12px;
    padding-inline: 16px;
    scroll-snap-type: x mandatory;
  }
  .bb-card{
    width: auto;              /* לא להגביל לפי clamp/32vw */
    border-radius: 20px;      /* עיגול גם לקארד */
  }
  .bb-media{
    border-radius: inherit;
    overflow: hidden;
  }
  .bb-video{ width:100%; height:100%; object-fit:cover; display:block; }
}
/* ==== תמיד 3 כרטיסיות מ-451px ומעלה (כולל טאבלט ודסקטופ) ==== */
@media (min-width: 451px){
  .bb-track{
    grid-auto-columns: calc((100% - 2 * var(--gap)) / 3);
  }
  .bb-card{
    width: auto; /* לא להגביל ל-32vw או clamp */
    border-radius: 20px;
  }
  .bb-media{
    border-radius: inherit;
    overflow: hidden;
  }
}

/* ==== עד 450px: כרטיסייה אחת, רוחב מלא, מרווחים נכונים ==== */
@media (max-width: 450px){
  .bb-track{
    grid-auto-columns: 100%;
    gap: 12px;
    padding-inline: 16px;
    scroll-snap-type: x mandatory;
  }
  .bb-card{
    width: auto;
    border-radius: 20px;
  }
  .bb-media{
    border-radius: inherit;
    overflow: hidden;
  }

  /* כפתורים קצת קטנים יותר במסכים ממש צרים */
  .bb-sec { --btn: 40px; }
}

/* הצללה רכה לכרטיס המדיה בכל רוחב */
.bb-media{ box-shadow: 0 6px 24px rgba(0,0,0,.10); }

/* אייקונים בכפתורים ומצבי aria (במידה וחסר) */
.bb-btn .ic{ display:none; width:20px; height:20px; }
.bb-btn--play[aria-pressed="true"]  .ic--pause   { display:block; }
.bb-btn--play[aria-pressed="false"] .ic--play    { display:block; }
.bb-btn--mute[aria-pressed="true"]  .ic--muted   { display:block; }
.bb-btn--mute[aria-pressed="false"] .ic--unmuted { display:block; }
/* ===== עד 450px: כרטיס אחד במרכז + פסים של שכנות ===== */
@media (max-width: 450px){
  .bb-track{
    /* 88% נותן שוליים גלויים של השכנות; אפשר לשנות ל-86–90 לפי הטעם */
    grid-auto-columns: 88%;
    gap: 12px;
    padding-inline: 16px;
    scroll-snap-type: x mandatory;
  }
  .bb-card{ width: auto; border-radius: 20px; }
  .bb-media{ border-radius: inherit; overflow: hidden; }
  .bb-sec{ --btn: 40px; }
}

